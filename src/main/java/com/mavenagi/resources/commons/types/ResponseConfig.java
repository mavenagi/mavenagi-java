/**
 * This file was auto-generated by Fern from our API Definition.
 */
package com.mavenagi.resources.commons.types;

import com.fasterxml.jackson.annotation.JsonAnyGetter;
import com.fasterxml.jackson.annotation.JsonAnySetter;
import com.fasterxml.jackson.annotation.JsonIgnoreProperties;
import com.fasterxml.jackson.annotation.JsonInclude;
import com.fasterxml.jackson.annotation.JsonProperty;
import com.fasterxml.jackson.annotation.JsonSetter;
import com.fasterxml.jackson.annotation.Nulls;
import com.fasterxml.jackson.databind.annotation.JsonDeserialize;
import com.mavenagi.core.ObjectMappers;
import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;
import java.util.Map;
import java.util.Objects;
import org.jetbrains.annotations.NotNull;

@JsonInclude(JsonInclude.Include.NON_ABSENT)
@JsonDeserialize(builder = ResponseConfig.Builder.class)
public final class ResponseConfig {
    private final List<Capability> capabilities;

    private final boolean isCopilot;

    private final ResponseLength responseLength;

    private final Map<String, Object> additionalProperties;

    private ResponseConfig(
            List<Capability> capabilities,
            boolean isCopilot,
            ResponseLength responseLength,
            Map<String, Object> additionalProperties) {
        this.capabilities = capabilities;
        this.isCopilot = isCopilot;
        this.responseLength = responseLength;
        this.additionalProperties = additionalProperties;
    }

    /**
     * @return List of capabilities supported by the caller. Defaults to <code>[MARKDOWN, FORMS, IMAGES]</code>.
     * <ul>
     * <li><code>MARKDOWN</code>: Whether the response should include markdown formatting. If not provided, the response will be plain text. Not respected while streaming.</li>
     * <li><code>FORMS</code>: Whether the response should include forms. If provided, the caller needs to render action forms when returned from the ask API and allow submission of the forms with the submitActionForm API. If not provided, then actions which require user interaction will not be considered by the LLM. Removing this capability is recommended for surfaces which can not display UI (e.g. SMS, voice).</li>
     * <li><code>IMAGES</code>: Whether the response should include images. Not yet supported.</li>
     * <li><code>CHARTS_HIGHCHARTS_TS</code>: Whether the response should include a Highcharts typescript chart if applicable.</li>
     * <li><code>ASYNC</code>: Whether the app that created this conversation supports asynchronous message delivery. If provided, messages may be sent to the app via the <code>handleMessage</code> function.</li>
     * <li><code>OAUTH_BUTTONS</code>: Whether the response should include OAuth buttons. If provided, the caller needs to render OAuth buttons when returned from the ask API and allow the user to click the buttons to initiate the OAuth flow. If not provided, then actions which require OAuth authorization will not be considered by the LLM. This capability is not recommended for surfaces which can not display links (e.g. voice).</li>
     * </ul>
     */
    @JsonProperty("capabilities")
    public List<Capability> getCapabilities() {
        return capabilities;
    }

    /**
     * @return Whether the response is for an human agent (true) or an end user (false). Defaults to false.
     */
    @JsonProperty("isCopilot")
    public boolean getIsCopilot() {
        return isCopilot;
    }

    /**
     * @return The desired response length. Defaults to ResponseLength.MEDIUM.
     */
    @JsonProperty("responseLength")
    public ResponseLength getResponseLength() {
        return responseLength;
    }

    @java.lang.Override
    public boolean equals(Object other) {
        if (this == other) return true;
        return other instanceof ResponseConfig && equalTo((ResponseConfig) other);
    }

    @JsonAnyGetter
    public Map<String, Object> getAdditionalProperties() {
        return this.additionalProperties;
    }

    private boolean equalTo(ResponseConfig other) {
        return capabilities.equals(other.capabilities)
                && isCopilot == other.isCopilot
                && responseLength.equals(other.responseLength);
    }

    @java.lang.Override
    public int hashCode() {
        return Objects.hash(this.capabilities, this.isCopilot, this.responseLength);
    }

    @java.lang.Override
    public String toString() {
        return ObjectMappers.stringify(this);
    }

    public static IsCopilotStage builder() {
        return new Builder();
    }

    public interface IsCopilotStage {
        /**
         * <p>Whether the response is for an human agent (true) or an end user (false). Defaults to false.</p>
         */
        ResponseLengthStage isCopilot(boolean isCopilot);

        Builder from(ResponseConfig other);
    }

    public interface ResponseLengthStage {
        /**
         * <p>The desired response length. Defaults to ResponseLength.MEDIUM.</p>
         */
        _FinalStage responseLength(@NotNull ResponseLength responseLength);
    }

    public interface _FinalStage {
        ResponseConfig build();

        /**
         * <p>List of capabilities supported by the caller. Defaults to <code>[MARKDOWN, FORMS, IMAGES]</code>.</p>
         * <ul>
         * <li><code>MARKDOWN</code>: Whether the response should include markdown formatting. If not provided, the response will be plain text. Not respected while streaming.</li>
         * <li><code>FORMS</code>: Whether the response should include forms. If provided, the caller needs to render action forms when returned from the ask API and allow submission of the forms with the submitActionForm API. If not provided, then actions which require user interaction will not be considered by the LLM. Removing this capability is recommended for surfaces which can not display UI (e.g. SMS, voice).</li>
         * <li><code>IMAGES</code>: Whether the response should include images. Not yet supported.</li>
         * <li><code>CHARTS_HIGHCHARTS_TS</code>: Whether the response should include a Highcharts typescript chart if applicable.</li>
         * <li><code>ASYNC</code>: Whether the app that created this conversation supports asynchronous message delivery. If provided, messages may be sent to the app via the <code>handleMessage</code> function.</li>
         * <li><code>OAUTH_BUTTONS</code>: Whether the response should include OAuth buttons. If provided, the caller needs to render OAuth buttons when returned from the ask API and allow the user to click the buttons to initiate the OAuth flow. If not provided, then actions which require OAuth authorization will not be considered by the LLM. This capability is not recommended for surfaces which can not display links (e.g. voice).</li>
         * </ul>
         */
        _FinalStage capabilities(List<Capability> capabilities);

        _FinalStage addCapabilities(Capability capabilities);

        _FinalStage addAllCapabilities(List<Capability> capabilities);
    }

    @JsonIgnoreProperties(ignoreUnknown = true)
    public static final class Builder implements IsCopilotStage, ResponseLengthStage, _FinalStage {
        private boolean isCopilot;

        private ResponseLength responseLength;

        private List<Capability> capabilities = new ArrayList<>();

        @JsonAnySetter
        private Map<String, Object> additionalProperties = new HashMap<>();

        private Builder() {}

        @java.lang.Override
        public Builder from(ResponseConfig other) {
            capabilities(other.getCapabilities());
            isCopilot(other.getIsCopilot());
            responseLength(other.getResponseLength());
            return this;
        }

        /**
         * <p>Whether the response is for an human agent (true) or an end user (false). Defaults to false.</p>
         * <p>Whether the response is for an human agent (true) or an end user (false). Defaults to false.</p>
         * @return Reference to {@code this} so that method calls can be chained together.
         */
        @java.lang.Override
        @JsonSetter("isCopilot")
        public ResponseLengthStage isCopilot(boolean isCopilot) {
            this.isCopilot = isCopilot;
            return this;
        }

        /**
         * <p>The desired response length. Defaults to ResponseLength.MEDIUM.</p>
         * <p>The desired response length. Defaults to ResponseLength.MEDIUM.</p>
         * @return Reference to {@code this} so that method calls can be chained together.
         */
        @java.lang.Override
        @JsonSetter("responseLength")
        public _FinalStage responseLength(@NotNull ResponseLength responseLength) {
            this.responseLength = Objects.requireNonNull(responseLength, "responseLength must not be null");
            return this;
        }

        /**
         * <p>List of capabilities supported by the caller. Defaults to <code>[MARKDOWN, FORMS, IMAGES]</code>.</p>
         * <ul>
         * <li><code>MARKDOWN</code>: Whether the response should include markdown formatting. If not provided, the response will be plain text. Not respected while streaming.</li>
         * <li><code>FORMS</code>: Whether the response should include forms. If provided, the caller needs to render action forms when returned from the ask API and allow submission of the forms with the submitActionForm API. If not provided, then actions which require user interaction will not be considered by the LLM. Removing this capability is recommended for surfaces which can not display UI (e.g. SMS, voice).</li>
         * <li><code>IMAGES</code>: Whether the response should include images. Not yet supported.</li>
         * <li><code>CHARTS_HIGHCHARTS_TS</code>: Whether the response should include a Highcharts typescript chart if applicable.</li>
         * <li><code>ASYNC</code>: Whether the app that created this conversation supports asynchronous message delivery. If provided, messages may be sent to the app via the <code>handleMessage</code> function.</li>
         * <li><code>OAUTH_BUTTONS</code>: Whether the response should include OAuth buttons. If provided, the caller needs to render OAuth buttons when returned from the ask API and allow the user to click the buttons to initiate the OAuth flow. If not provided, then actions which require OAuth authorization will not be considered by the LLM. This capability is not recommended for surfaces which can not display links (e.g. voice).</li>
         * </ul>
         * @return Reference to {@code this} so that method calls can be chained together.
         */
        @java.lang.Override
        public _FinalStage addAllCapabilities(List<Capability> capabilities) {
            if (capabilities != null) {
                this.capabilities.addAll(capabilities);
            }
            return this;
        }

        /**
         * <p>List of capabilities supported by the caller. Defaults to <code>[MARKDOWN, FORMS, IMAGES]</code>.</p>
         * <ul>
         * <li><code>MARKDOWN</code>: Whether the response should include markdown formatting. If not provided, the response will be plain text. Not respected while streaming.</li>
         * <li><code>FORMS</code>: Whether the response should include forms. If provided, the caller needs to render action forms when returned from the ask API and allow submission of the forms with the submitActionForm API. If not provided, then actions which require user interaction will not be considered by the LLM. Removing this capability is recommended for surfaces which can not display UI (e.g. SMS, voice).</li>
         * <li><code>IMAGES</code>: Whether the response should include images. Not yet supported.</li>
         * <li><code>CHARTS_HIGHCHARTS_TS</code>: Whether the response should include a Highcharts typescript chart if applicable.</li>
         * <li><code>ASYNC</code>: Whether the app that created this conversation supports asynchronous message delivery. If provided, messages may be sent to the app via the <code>handleMessage</code> function.</li>
         * <li><code>OAUTH_BUTTONS</code>: Whether the response should include OAuth buttons. If provided, the caller needs to render OAuth buttons when returned from the ask API and allow the user to click the buttons to initiate the OAuth flow. If not provided, then actions which require OAuth authorization will not be considered by the LLM. This capability is not recommended for surfaces which can not display links (e.g. voice).</li>
         * </ul>
         * @return Reference to {@code this} so that method calls can be chained together.
         */
        @java.lang.Override
        public _FinalStage addCapabilities(Capability capabilities) {
            this.capabilities.add(capabilities);
            return this;
        }

        /**
         * <p>List of capabilities supported by the caller. Defaults to <code>[MARKDOWN, FORMS, IMAGES]</code>.</p>
         * <ul>
         * <li><code>MARKDOWN</code>: Whether the response should include markdown formatting. If not provided, the response will be plain text. Not respected while streaming.</li>
         * <li><code>FORMS</code>: Whether the response should include forms. If provided, the caller needs to render action forms when returned from the ask API and allow submission of the forms with the submitActionForm API. If not provided, then actions which require user interaction will not be considered by the LLM. Removing this capability is recommended for surfaces which can not display UI (e.g. SMS, voice).</li>
         * <li><code>IMAGES</code>: Whether the response should include images. Not yet supported.</li>
         * <li><code>CHARTS_HIGHCHARTS_TS</code>: Whether the response should include a Highcharts typescript chart if applicable.</li>
         * <li><code>ASYNC</code>: Whether the app that created this conversation supports asynchronous message delivery. If provided, messages may be sent to the app via the <code>handleMessage</code> function.</li>
         * <li><code>OAUTH_BUTTONS</code>: Whether the response should include OAuth buttons. If provided, the caller needs to render OAuth buttons when returned from the ask API and allow the user to click the buttons to initiate the OAuth flow. If not provided, then actions which require OAuth authorization will not be considered by the LLM. This capability is not recommended for surfaces which can not display links (e.g. voice).</li>
         * </ul>
         */
        @java.lang.Override
        @JsonSetter(value = "capabilities", nulls = Nulls.SKIP)
        public _FinalStage capabilities(List<Capability> capabilities) {
            this.capabilities.clear();
            if (capabilities != null) {
                this.capabilities.addAll(capabilities);
            }
            return this;
        }

        @java.lang.Override
        public ResponseConfig build() {
            return new ResponseConfig(capabilities, isCopilot, responseLength, additionalProperties);
        }
    }
}
