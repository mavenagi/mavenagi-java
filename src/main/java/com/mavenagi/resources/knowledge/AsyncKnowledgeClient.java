/**
 * This file was auto-generated by Fern from our API Definition.
 */
package com.mavenagi.resources.knowledge;

import com.mavenagi.core.ClientOptions;
import com.mavenagi.core.RequestOptions;
import com.mavenagi.resources.knowledge.requests.KnowledgeBaseGetRequest;
import com.mavenagi.resources.knowledge.requests.KnowledgeBasePatchRequest;
import com.mavenagi.resources.knowledge.requests.KnowledgeBaseVersionsListRequest;
import com.mavenagi.resources.knowledge.requests.KnowledgeDocumentGetRequest;
import com.mavenagi.resources.knowledge.types.FinalizeKnowledgeBaseVersionRequest;
import com.mavenagi.resources.knowledge.types.KnowledgeBaseRefreshRequest;
import com.mavenagi.resources.knowledge.types.KnowledgeBaseRequest;
import com.mavenagi.resources.knowledge.types.KnowledgeBaseResponse;
import com.mavenagi.resources.knowledge.types.KnowledgeBaseSearchRequest;
import com.mavenagi.resources.knowledge.types.KnowledgeBaseVersion;
import com.mavenagi.resources.knowledge.types.KnowledgeBaseVersionRequest;
import com.mavenagi.resources.knowledge.types.KnowledgeBaseVersionsListResponse;
import com.mavenagi.resources.knowledge.types.KnowledgeBasesResponse;
import com.mavenagi.resources.knowledge.types.KnowledgeDeleteRequest;
import com.mavenagi.resources.knowledge.types.KnowledgeDocumentRequest;
import com.mavenagi.resources.knowledge.types.KnowledgeDocumentResponse;
import com.mavenagi.resources.knowledge.types.KnowledgeDocumentSearchRequest;
import com.mavenagi.resources.knowledge.types.KnowledgeDocumentsResponse;
import java.util.concurrent.CompletableFuture;

public class AsyncKnowledgeClient {
    protected final ClientOptions clientOptions;

    private final AsyncRawKnowledgeClient rawClient;

    public AsyncKnowledgeClient(ClientOptions clientOptions) {
        this.clientOptions = clientOptions;
        this.rawClient = new AsyncRawKnowledgeClient(clientOptions);
    }

    /**
     * Get responses with HTTP metadata like headers
     */
    public AsyncRawKnowledgeClient withRawResponse() {
        return this.rawClient;
    }

    /**
     * Search knowledge bases
     */
    public CompletableFuture<KnowledgeBasesResponse> searchKnowledgeBases() {
        return this.rawClient.searchKnowledgeBases().thenApply(response -> response.body());
    }

    /**
     * Search knowledge bases
     */
    public CompletableFuture<KnowledgeBasesResponse> searchKnowledgeBases(KnowledgeBaseSearchRequest request) {
        return this.rawClient.searchKnowledgeBases(request).thenApply(response -> response.body());
    }

    /**
     * Search knowledge bases
     */
    public CompletableFuture<KnowledgeBasesResponse> searchKnowledgeBases(
            KnowledgeBaseSearchRequest request, RequestOptions requestOptions) {
        return this.rawClient.searchKnowledgeBases(request, requestOptions).thenApply(response -> response.body());
    }

    /**
     * Update a knowledge base or create it if it doesn't exist.
     */
    public CompletableFuture<KnowledgeBaseResponse> createOrUpdateKnowledgeBase(KnowledgeBaseRequest request) {
        return this.rawClient.createOrUpdateKnowledgeBase(request).thenApply(response -> response.body());
    }

    /**
     * Update a knowledge base or create it if it doesn't exist.
     */
    public CompletableFuture<KnowledgeBaseResponse> createOrUpdateKnowledgeBase(
            KnowledgeBaseRequest request, RequestOptions requestOptions) {
        return this.rawClient
                .createOrUpdateKnowledgeBase(request, requestOptions)
                .thenApply(response -> response.body());
    }

    /**
     * Get an existing knowledge base by its supplied ID
     */
    public CompletableFuture<KnowledgeBaseResponse> getKnowledgeBase(String knowledgeBaseReferenceId) {
        return this.rawClient.getKnowledgeBase(knowledgeBaseReferenceId).thenApply(response -> response.body());
    }

    /**
     * Get an existing knowledge base by its supplied ID
     */
    public CompletableFuture<KnowledgeBaseResponse> getKnowledgeBase(
            String knowledgeBaseReferenceId, KnowledgeBaseGetRequest request) {
        return this.rawClient
                .getKnowledgeBase(knowledgeBaseReferenceId, request)
                .thenApply(response -> response.body());
    }

    /**
     * Get an existing knowledge base by its supplied ID
     */
    public CompletableFuture<KnowledgeBaseResponse> getKnowledgeBase(
            String knowledgeBaseReferenceId, KnowledgeBaseGetRequest request, RequestOptions requestOptions) {
        return this.rawClient
                .getKnowledgeBase(knowledgeBaseReferenceId, request, requestOptions)
                .thenApply(response -> response.body());
    }

    /**
     * Request that a knowledge base refresh itself.
     * <p>Knowledge bases refresh on a schedule determined by the <code>refreshFrequency</code> field.
     * They can also be refreshed on demand by calling this endpoint.</p>
     */
    public CompletableFuture<Void> refreshKnowledgeBase(String knowledgeBaseReferenceId) {
        return this.rawClient.refreshKnowledgeBase(knowledgeBaseReferenceId).thenApply(response -> response.body());
    }

    /**
     * Request that a knowledge base refresh itself.
     * <p>Knowledge bases refresh on a schedule determined by the <code>refreshFrequency</code> field.
     * They can also be refreshed on demand by calling this endpoint.</p>
     */
    public CompletableFuture<Void> refreshKnowledgeBase(
            String knowledgeBaseReferenceId, KnowledgeBaseRefreshRequest request) {
        return this.rawClient
                .refreshKnowledgeBase(knowledgeBaseReferenceId, request)
                .thenApply(response -> response.body());
    }

    /**
     * Request that a knowledge base refresh itself.
     * <p>Knowledge bases refresh on a schedule determined by the <code>refreshFrequency</code> field.
     * They can also be refreshed on demand by calling this endpoint.</p>
     */
    public CompletableFuture<Void> refreshKnowledgeBase(
            String knowledgeBaseReferenceId, KnowledgeBaseRefreshRequest request, RequestOptions requestOptions) {
        return this.rawClient
                .refreshKnowledgeBase(knowledgeBaseReferenceId, request, requestOptions)
                .thenApply(response -> response.body());
    }

    /**
     * Update mutable knowledge base fields
     * <p>The <code>appId</code> field can be provided to update a knowledge base owned by a different app.
     * All other fields will overwrite the existing value on the knowledge base only if provided.</p>
     */
    public CompletableFuture<KnowledgeBaseResponse> patchKnowledgeBase(String knowledgeBaseReferenceId) {
        return this.rawClient.patchKnowledgeBase(knowledgeBaseReferenceId).thenApply(response -> response.body());
    }

    /**
     * Update mutable knowledge base fields
     * <p>The <code>appId</code> field can be provided to update a knowledge base owned by a different app.
     * All other fields will overwrite the existing value on the knowledge base only if provided.</p>
     */
    public CompletableFuture<KnowledgeBaseResponse> patchKnowledgeBase(
            String knowledgeBaseReferenceId, KnowledgeBasePatchRequest request) {
        return this.rawClient
                .patchKnowledgeBase(knowledgeBaseReferenceId, request)
                .thenApply(response -> response.body());
    }

    /**
     * Update mutable knowledge base fields
     * <p>The <code>appId</code> field can be provided to update a knowledge base owned by a different app.
     * All other fields will overwrite the existing value on the knowledge base only if provided.</p>
     */
    public CompletableFuture<KnowledgeBaseResponse> patchKnowledgeBase(
            String knowledgeBaseReferenceId, KnowledgeBasePatchRequest request, RequestOptions requestOptions) {
        return this.rawClient
                .patchKnowledgeBase(knowledgeBaseReferenceId, request, requestOptions)
                .thenApply(response -> response.body());
    }

    /**
     * Create a new knowledge base version.
     * <p>If an existing version is in progress, then that version will be finalized in an error state.</p>
     */
    public CompletableFuture<KnowledgeBaseVersion> createKnowledgeBaseVersion(
            String knowledgeBaseReferenceId, KnowledgeBaseVersionRequest request) {
        return this.rawClient
                .createKnowledgeBaseVersion(knowledgeBaseReferenceId, request)
                .thenApply(response -> response.body());
    }

    /**
     * Create a new knowledge base version.
     * <p>If an existing version is in progress, then that version will be finalized in an error state.</p>
     */
    public CompletableFuture<KnowledgeBaseVersion> createKnowledgeBaseVersion(
            String knowledgeBaseReferenceId, KnowledgeBaseVersionRequest request, RequestOptions requestOptions) {
        return this.rawClient
                .createKnowledgeBaseVersion(knowledgeBaseReferenceId, request, requestOptions)
                .thenApply(response -> response.body());
    }

    /**
     * Finalize the latest knowledge base version. Required to indicate the version is complete. Will throw an exception if the latest version is not in progress.
     */
    public CompletableFuture<KnowledgeBaseVersion> finalizeKnowledgeBaseVersion(String knowledgeBaseReferenceId) {
        return this.rawClient
                .finalizeKnowledgeBaseVersion(knowledgeBaseReferenceId)
                .thenApply(response -> response.body());
    }

    /**
     * Finalize the latest knowledge base version. Required to indicate the version is complete. Will throw an exception if the latest version is not in progress.
     */
    public CompletableFuture<KnowledgeBaseVersion> finalizeKnowledgeBaseVersion(
            String knowledgeBaseReferenceId, FinalizeKnowledgeBaseVersionRequest request) {
        return this.rawClient
                .finalizeKnowledgeBaseVersion(knowledgeBaseReferenceId, request)
                .thenApply(response -> response.body());
    }

    /**
     * Finalize the latest knowledge base version. Required to indicate the version is complete. Will throw an exception if the latest version is not in progress.
     */
    public CompletableFuture<KnowledgeBaseVersion> finalizeKnowledgeBaseVersion(
            String knowledgeBaseReferenceId,
            FinalizeKnowledgeBaseVersionRequest request,
            RequestOptions requestOptions) {
        return this.rawClient
                .finalizeKnowledgeBaseVersion(knowledgeBaseReferenceId, request, requestOptions)
                .thenApply(response -> response.body());
    }

    /**
     * List all active versions for a knowledge base. Returns the most recent versions first.
     */
    public CompletableFuture<KnowledgeBaseVersionsListResponse> listKnowledgeBaseVersions(
            String knowledgeBaseReferenceId) {
        return this.rawClient
                .listKnowledgeBaseVersions(knowledgeBaseReferenceId)
                .thenApply(response -> response.body());
    }

    /**
     * List all active versions for a knowledge base. Returns the most recent versions first.
     */
    public CompletableFuture<KnowledgeBaseVersionsListResponse> listKnowledgeBaseVersions(
            String knowledgeBaseReferenceId, KnowledgeBaseVersionsListRequest request) {
        return this.rawClient
                .listKnowledgeBaseVersions(knowledgeBaseReferenceId, request)
                .thenApply(response -> response.body());
    }

    /**
     * List all active versions for a knowledge base. Returns the most recent versions first.
     */
    public CompletableFuture<KnowledgeBaseVersionsListResponse> listKnowledgeBaseVersions(
            String knowledgeBaseReferenceId, KnowledgeBaseVersionsListRequest request, RequestOptions requestOptions) {
        return this.rawClient
                .listKnowledgeBaseVersions(knowledgeBaseReferenceId, request, requestOptions)
                .thenApply(response -> response.body());
    }

    /**
     * Search knowledge documents
     */
    public CompletableFuture<KnowledgeDocumentsResponse> searchKnowledgeDocuments() {
        return this.rawClient.searchKnowledgeDocuments().thenApply(response -> response.body());
    }

    /**
     * Search knowledge documents
     */
    public CompletableFuture<KnowledgeDocumentsResponse> searchKnowledgeDocuments(
            KnowledgeDocumentSearchRequest request) {
        return this.rawClient.searchKnowledgeDocuments(request).thenApply(response -> response.body());
    }

    /**
     * Search knowledge documents
     */
    public CompletableFuture<KnowledgeDocumentsResponse> searchKnowledgeDocuments(
            KnowledgeDocumentSearchRequest request, RequestOptions requestOptions) {
        return this.rawClient.searchKnowledgeDocuments(request, requestOptions).thenApply(response -> response.body());
    }

    /**
     * Create or update a knowledge document. Requires an existing knowledge base with an in progress version.
     * Will throw an exception if the latest version is not in progress.
     * <p>&lt;Tip&gt;
     * This API maintains document version history. If for the same reference ID none of the `title`, `text`, `sourceUrl`, `metadata` fields
     * have changed, a new document version will not be created. The existing version will be reused.
     * &lt;/Tip&gt;</p>
     */
    public CompletableFuture<KnowledgeDocumentResponse> createKnowledgeDocument(
            String knowledgeBaseReferenceId, KnowledgeDocumentRequest request) {
        return this.rawClient
                .createKnowledgeDocument(knowledgeBaseReferenceId, request)
                .thenApply(response -> response.body());
    }

    /**
     * Create or update a knowledge document. Requires an existing knowledge base with an in progress version.
     * Will throw an exception if the latest version is not in progress.
     * <p>&lt;Tip&gt;
     * This API maintains document version history. If for the same reference ID none of the `title`, `text`, `sourceUrl`, `metadata` fields
     * have changed, a new document version will not be created. The existing version will be reused.
     * &lt;/Tip&gt;</p>
     */
    public CompletableFuture<KnowledgeDocumentResponse> createKnowledgeDocument(
            String knowledgeBaseReferenceId, KnowledgeDocumentRequest request, RequestOptions requestOptions) {
        return this.rawClient
                .createKnowledgeDocument(knowledgeBaseReferenceId, request, requestOptions)
                .thenApply(response -> response.body());
    }

    /**
     * Delete knowledge document from a specific version.
     * Requires an existing knowledge base with an in progress version of type PARTIAL. Will throw an exception if the version is not in progress.
     */
    public CompletableFuture<Void> deleteKnowledgeDocument(
            String knowledgeBaseReferenceId, String knowledgeDocumentReferenceId, KnowledgeDeleteRequest request) {
        return this.rawClient
                .deleteKnowledgeDocument(knowledgeBaseReferenceId, knowledgeDocumentReferenceId, request)
                .thenApply(response -> response.body());
    }

    /**
     * Delete knowledge document from a specific version.
     * Requires an existing knowledge base with an in progress version of type PARTIAL. Will throw an exception if the version is not in progress.
     */
    public CompletableFuture<Void> deleteKnowledgeDocument(
            String knowledgeBaseReferenceId,
            String knowledgeDocumentReferenceId,
            KnowledgeDeleteRequest request,
            RequestOptions requestOptions) {
        return this.rawClient
                .deleteKnowledgeDocument(
                        knowledgeBaseReferenceId, knowledgeDocumentReferenceId, request, requestOptions)
                .thenApply(response -> response.body());
    }

    /**
     * Get a knowledge document by its supplied version and document IDs. Response includes document content in markdown format.
     */
    public CompletableFuture<KnowledgeDocumentResponse> getKnowledgeDocument(
            String knowledgeBaseVersionReferenceId,
            String knowledgeDocumentReferenceId,
            KnowledgeDocumentGetRequest request) {
        return this.rawClient
                .getKnowledgeDocument(knowledgeBaseVersionReferenceId, knowledgeDocumentReferenceId, request)
                .thenApply(response -> response.body());
    }

    /**
     * Get a knowledge document by its supplied version and document IDs. Response includes document content in markdown format.
     */
    public CompletableFuture<KnowledgeDocumentResponse> getKnowledgeDocument(
            String knowledgeBaseVersionReferenceId,
            String knowledgeDocumentReferenceId,
            KnowledgeDocumentGetRequest request,
            RequestOptions requestOptions) {
        return this.rawClient
                .getKnowledgeDocument(
                        knowledgeBaseVersionReferenceId, knowledgeDocumentReferenceId, request, requestOptions)
                .thenApply(response -> response.body());
    }
}
