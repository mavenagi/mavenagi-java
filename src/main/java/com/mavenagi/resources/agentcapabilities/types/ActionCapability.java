/**
 * This file was auto-generated by Fern from our API Definition.
 */
package com.mavenagi.resources.agentcapabilities.types;

import com.fasterxml.jackson.annotation.JsonAnyGetter;
import com.fasterxml.jackson.annotation.JsonAnySetter;
import com.fasterxml.jackson.annotation.JsonIgnore;
import com.fasterxml.jackson.annotation.JsonIgnoreProperties;
import com.fasterxml.jackson.annotation.JsonInclude;
import com.fasterxml.jackson.annotation.JsonProperty;
import com.fasterxml.jackson.annotation.JsonSetter;
import com.fasterxml.jackson.annotation.Nulls;
import com.fasterxml.jackson.databind.annotation.JsonDeserialize;
import com.mavenagi.core.Nullable;
import com.mavenagi.core.NullableNonemptyFilter;
import com.mavenagi.core.ObjectMappers;
import com.mavenagi.resources.commons.types.ActionParameter;
import com.mavenagi.resources.commons.types.EntityId;
import com.mavenagi.resources.commons.types.Precondition;
import java.time.OffsetDateTime;
import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;
import java.util.Map;
import java.util.Objects;
import java.util.Optional;
import org.jetbrains.annotations.NotNull;

@JsonInclude(JsonInclude.Include.NON_ABSENT)
@JsonDeserialize(builder = ActionCapability.Builder.class)
public final class ActionCapability implements IAgentCapabilityBase {
    private final String name;

    private final Optional<String> description;

    private final OffsetDateTime createdAt;

    private final boolean enabled;

    private final int version;

    private final EntityId capabilityId;

    private final boolean userInteractionRequired;

    private final Optional<String> buttonName;

    private final List<ActionParameter> userFormParameters;

    private final Optional<Precondition> precondition;

    private final Optional<String> descriptionOverride;

    private final Optional<String> preconditionExplanation;

    private final boolean pinned;

    private final Map<String, Object> additionalProperties;

    private ActionCapability(
            String name,
            Optional<String> description,
            OffsetDateTime createdAt,
            boolean enabled,
            int version,
            EntityId capabilityId,
            boolean userInteractionRequired,
            Optional<String> buttonName,
            List<ActionParameter> userFormParameters,
            Optional<Precondition> precondition,
            Optional<String> descriptionOverride,
            Optional<String> preconditionExplanation,
            boolean pinned,
            Map<String, Object> additionalProperties) {
        this.name = name;
        this.description = description;
        this.createdAt = createdAt;
        this.enabled = enabled;
        this.version = version;
        this.capabilityId = capabilityId;
        this.userInteractionRequired = userInteractionRequired;
        this.buttonName = buttonName;
        this.userFormParameters = userFormParameters;
        this.precondition = precondition;
        this.descriptionOverride = descriptionOverride;
        this.preconditionExplanation = preconditionExplanation;
        this.pinned = pinned;
        this.additionalProperties = additionalProperties;
    }

    @JsonProperty("name")
    @java.lang.Override
    public String getName() {
        return name;
    }

    @JsonIgnore
    @java.lang.Override
    public Optional<String> getDescription() {
        if (description == null) {
            return Optional.empty();
        }
        return description;
    }

    /**
     * @return Timestamp when the capability was created
     */
    @JsonProperty("createdAt")
    @java.lang.Override
    public OffsetDateTime getCreatedAt() {
        return createdAt;
    }

    /**
     * @return Whether this capability will be called by Maven.
     */
    @JsonProperty("enabled")
    @java.lang.Override
    public boolean getEnabled() {
        return enabled;
    }

    @JsonProperty("version")
    @java.lang.Override
    public int getVersion() {
        return version;
    }

    /**
     * @return ID that uniquely identifies this capability
     */
    @JsonProperty("capabilityId")
    @java.lang.Override
    public EntityId getCapabilityId() {
        return capabilityId;
    }

    @JsonProperty("userInteractionRequired")
    public boolean getUserInteractionRequired() {
        return userInteractionRequired;
    }

    /**
     * @return When user interaction is required, the name of the button that is shown to the end user to confirm execution of the action. Defaults to &quot;Submit&quot; if not supplied.
     */
    @JsonIgnore
    public Optional<String> getButtonName() {
        if (buttonName == null) {
            return Optional.empty();
        }
        return buttonName;
    }

    /**
     * @return The parameters that the action uses as input. An action will only be executed when all of the required parameters are provided. Parameter values may be inferred from the user's conversation by the LLM.
     */
    @JsonProperty("userFormParameters")
    public List<ActionParameter> getUserFormParameters() {
        return userFormParameters;
    }

    @JsonProperty("precondition")
    public Optional<Precondition> getPrecondition() {
        return precondition;
    }

    @JsonProperty("descriptionOverride")
    public Optional<String> getDescriptionOverride() {
        return descriptionOverride;
    }

    /**
     * @return A human-readable explanation of the precondition associated with this action, if present.
     */
    @JsonProperty("preconditionExplanation")
    public Optional<String> getPreconditionExplanation() {
        return preconditionExplanation;
    }

    @JsonProperty("pinned")
    public boolean getPinned() {
        return pinned;
    }

    @JsonInclude(value = JsonInclude.Include.CUSTOM, valueFilter = NullableNonemptyFilter.class)
    @JsonProperty("description")
    private Optional<String> _getDescription() {
        return description;
    }

    @JsonInclude(value = JsonInclude.Include.CUSTOM, valueFilter = NullableNonemptyFilter.class)
    @JsonProperty("buttonName")
    private Optional<String> _getButtonName() {
        return buttonName;
    }

    @java.lang.Override
    public boolean equals(Object other) {
        if (this == other) return true;
        return other instanceof ActionCapability && equalTo((ActionCapability) other);
    }

    @JsonAnyGetter
    public Map<String, Object> getAdditionalProperties() {
        return this.additionalProperties;
    }

    private boolean equalTo(ActionCapability other) {
        return name.equals(other.name)
                && description.equals(other.description)
                && createdAt.equals(other.createdAt)
                && enabled == other.enabled
                && version == other.version
                && capabilityId.equals(other.capabilityId)
                && userInteractionRequired == other.userInteractionRequired
                && buttonName.equals(other.buttonName)
                && userFormParameters.equals(other.userFormParameters)
                && precondition.equals(other.precondition)
                && descriptionOverride.equals(other.descriptionOverride)
                && preconditionExplanation.equals(other.preconditionExplanation)
                && pinned == other.pinned;
    }

    @java.lang.Override
    public int hashCode() {
        return Objects.hash(
                this.name,
                this.description,
                this.createdAt,
                this.enabled,
                this.version,
                this.capabilityId,
                this.userInteractionRequired,
                this.buttonName,
                this.userFormParameters,
                this.precondition,
                this.descriptionOverride,
                this.preconditionExplanation,
                this.pinned);
    }

    @java.lang.Override
    public String toString() {
        return ObjectMappers.stringify(this);
    }

    public static NameStage builder() {
        return new Builder();
    }

    public interface NameStage {
        CreatedAtStage name(@NotNull String name);

        Builder from(ActionCapability other);
    }

    public interface CreatedAtStage {
        /**
         * <p>Timestamp when the capability was created</p>
         */
        EnabledStage createdAt(@NotNull OffsetDateTime createdAt);
    }

    public interface EnabledStage {
        /**
         * <p>Whether this capability will be called by Maven.</p>
         */
        VersionStage enabled(boolean enabled);
    }

    public interface VersionStage {
        CapabilityIdStage version(int version);
    }

    public interface CapabilityIdStage {
        /**
         * <p>ID that uniquely identifies this capability</p>
         */
        UserInteractionRequiredStage capabilityId(@NotNull EntityId capabilityId);
    }

    public interface UserInteractionRequiredStage {
        PinnedStage userInteractionRequired(boolean userInteractionRequired);
    }

    public interface PinnedStage {
        _FinalStage pinned(boolean pinned);
    }

    public interface _FinalStage {
        ActionCapability build();

        _FinalStage description(Optional<String> description);

        _FinalStage description(String description);

        _FinalStage description(Nullable<String> description);

        /**
         * <p>When user interaction is required, the name of the button that is shown to the end user to confirm execution of the action. Defaults to &quot;Submit&quot; if not supplied.</p>
         */
        _FinalStage buttonName(Optional<String> buttonName);

        _FinalStage buttonName(String buttonName);

        _FinalStage buttonName(Nullable<String> buttonName);

        /**
         * <p>The parameters that the action uses as input. An action will only be executed when all of the required parameters are provided. Parameter values may be inferred from the user's conversation by the LLM.</p>
         */
        _FinalStage userFormParameters(List<ActionParameter> userFormParameters);

        _FinalStage addUserFormParameters(ActionParameter userFormParameters);

        _FinalStage addAllUserFormParameters(List<ActionParameter> userFormParameters);

        _FinalStage precondition(Optional<Precondition> precondition);

        _FinalStage precondition(Precondition precondition);

        _FinalStage descriptionOverride(Optional<String> descriptionOverride);

        _FinalStage descriptionOverride(String descriptionOverride);

        /**
         * <p>A human-readable explanation of the precondition associated with this action, if present.</p>
         */
        _FinalStage preconditionExplanation(Optional<String> preconditionExplanation);

        _FinalStage preconditionExplanation(String preconditionExplanation);
    }

    @JsonIgnoreProperties(ignoreUnknown = true)
    public static final class Builder
            implements NameStage,
                    CreatedAtStage,
                    EnabledStage,
                    VersionStage,
                    CapabilityIdStage,
                    UserInteractionRequiredStage,
                    PinnedStage,
                    _FinalStage {
        private String name;

        private OffsetDateTime createdAt;

        private boolean enabled;

        private int version;

        private EntityId capabilityId;

        private boolean userInteractionRequired;

        private boolean pinned;

        private Optional<String> preconditionExplanation = Optional.empty();

        private Optional<String> descriptionOverride = Optional.empty();

        private Optional<Precondition> precondition = Optional.empty();

        private List<ActionParameter> userFormParameters = new ArrayList<>();

        private Optional<String> buttonName = Optional.empty();

        private Optional<String> description = Optional.empty();

        @JsonAnySetter
        private Map<String, Object> additionalProperties = new HashMap<>();

        private Builder() {}

        @java.lang.Override
        public Builder from(ActionCapability other) {
            name(other.getName());
            description(other.getDescription());
            createdAt(other.getCreatedAt());
            enabled(other.getEnabled());
            version(other.getVersion());
            capabilityId(other.getCapabilityId());
            userInteractionRequired(other.getUserInteractionRequired());
            buttonName(other.getButtonName());
            userFormParameters(other.getUserFormParameters());
            precondition(other.getPrecondition());
            descriptionOverride(other.getDescriptionOverride());
            preconditionExplanation(other.getPreconditionExplanation());
            pinned(other.getPinned());
            return this;
        }

        @java.lang.Override
        @JsonSetter("name")
        public CreatedAtStage name(@NotNull String name) {
            this.name = Objects.requireNonNull(name, "name must not be null");
            return this;
        }

        /**
         * <p>Timestamp when the capability was created</p>
         * <p>Timestamp when the capability was created</p>
         * @return Reference to {@code this} so that method calls can be chained together.
         */
        @java.lang.Override
        @JsonSetter("createdAt")
        public EnabledStage createdAt(@NotNull OffsetDateTime createdAt) {
            this.createdAt = Objects.requireNonNull(createdAt, "createdAt must not be null");
            return this;
        }

        /**
         * <p>Whether this capability will be called by Maven.</p>
         * <p>Whether this capability will be called by Maven.</p>
         * @return Reference to {@code this} so that method calls can be chained together.
         */
        @java.lang.Override
        @JsonSetter("enabled")
        public VersionStage enabled(boolean enabled) {
            this.enabled = enabled;
            return this;
        }

        @java.lang.Override
        @JsonSetter("version")
        public CapabilityIdStage version(int version) {
            this.version = version;
            return this;
        }

        /**
         * <p>ID that uniquely identifies this capability</p>
         * <p>ID that uniquely identifies this capability</p>
         * @return Reference to {@code this} so that method calls can be chained together.
         */
        @java.lang.Override
        @JsonSetter("capabilityId")
        public UserInteractionRequiredStage capabilityId(@NotNull EntityId capabilityId) {
            this.capabilityId = Objects.requireNonNull(capabilityId, "capabilityId must not be null");
            return this;
        }

        @java.lang.Override
        @JsonSetter("userInteractionRequired")
        public PinnedStage userInteractionRequired(boolean userInteractionRequired) {
            this.userInteractionRequired = userInteractionRequired;
            return this;
        }

        @java.lang.Override
        @JsonSetter("pinned")
        public _FinalStage pinned(boolean pinned) {
            this.pinned = pinned;
            return this;
        }

        /**
         * <p>A human-readable explanation of the precondition associated with this action, if present.</p>
         * @return Reference to {@code this} so that method calls can be chained together.
         */
        @java.lang.Override
        public _FinalStage preconditionExplanation(String preconditionExplanation) {
            this.preconditionExplanation = Optional.ofNullable(preconditionExplanation);
            return this;
        }

        /**
         * <p>A human-readable explanation of the precondition associated with this action, if present.</p>
         */
        @java.lang.Override
        @JsonSetter(value = "preconditionExplanation", nulls = Nulls.SKIP)
        public _FinalStage preconditionExplanation(Optional<String> preconditionExplanation) {
            this.preconditionExplanation = preconditionExplanation;
            return this;
        }

        @java.lang.Override
        public _FinalStage descriptionOverride(String descriptionOverride) {
            this.descriptionOverride = Optional.ofNullable(descriptionOverride);
            return this;
        }

        @java.lang.Override
        @JsonSetter(value = "descriptionOverride", nulls = Nulls.SKIP)
        public _FinalStage descriptionOverride(Optional<String> descriptionOverride) {
            this.descriptionOverride = descriptionOverride;
            return this;
        }

        @java.lang.Override
        public _FinalStage precondition(Precondition precondition) {
            this.precondition = Optional.ofNullable(precondition);
            return this;
        }

        @java.lang.Override
        @JsonSetter(value = "precondition", nulls = Nulls.SKIP)
        public _FinalStage precondition(Optional<Precondition> precondition) {
            this.precondition = precondition;
            return this;
        }

        /**
         * <p>The parameters that the action uses as input. An action will only be executed when all of the required parameters are provided. Parameter values may be inferred from the user's conversation by the LLM.</p>
         * @return Reference to {@code this} so that method calls can be chained together.
         */
        @java.lang.Override
        public _FinalStage addAllUserFormParameters(List<ActionParameter> userFormParameters) {
            if (userFormParameters != null) {
                this.userFormParameters.addAll(userFormParameters);
            }
            return this;
        }

        /**
         * <p>The parameters that the action uses as input. An action will only be executed when all of the required parameters are provided. Parameter values may be inferred from the user's conversation by the LLM.</p>
         * @return Reference to {@code this} so that method calls can be chained together.
         */
        @java.lang.Override
        public _FinalStage addUserFormParameters(ActionParameter userFormParameters) {
            this.userFormParameters.add(userFormParameters);
            return this;
        }

        /**
         * <p>The parameters that the action uses as input. An action will only be executed when all of the required parameters are provided. Parameter values may be inferred from the user's conversation by the LLM.</p>
         */
        @java.lang.Override
        @JsonSetter(value = "userFormParameters", nulls = Nulls.SKIP)
        public _FinalStage userFormParameters(List<ActionParameter> userFormParameters) {
            this.userFormParameters.clear();
            if (userFormParameters != null) {
                this.userFormParameters.addAll(userFormParameters);
            }
            return this;
        }

        /**
         * <p>When user interaction is required, the name of the button that is shown to the end user to confirm execution of the action. Defaults to &quot;Submit&quot; if not supplied.</p>
         * @return Reference to {@code this} so that method calls can be chained together.
         */
        @java.lang.Override
        public _FinalStage buttonName(Nullable<String> buttonName) {
            if (buttonName.isNull()) {
                this.buttonName = null;
            } else if (buttonName.isEmpty()) {
                this.buttonName = Optional.empty();
            } else {
                this.buttonName = Optional.of(buttonName.get());
            }
            return this;
        }

        /**
         * <p>When user interaction is required, the name of the button that is shown to the end user to confirm execution of the action. Defaults to &quot;Submit&quot; if not supplied.</p>
         * @return Reference to {@code this} so that method calls can be chained together.
         */
        @java.lang.Override
        public _FinalStage buttonName(String buttonName) {
            this.buttonName = Optional.ofNullable(buttonName);
            return this;
        }

        /**
         * <p>When user interaction is required, the name of the button that is shown to the end user to confirm execution of the action. Defaults to &quot;Submit&quot; if not supplied.</p>
         */
        @java.lang.Override
        @JsonSetter(value = "buttonName", nulls = Nulls.SKIP)
        public _FinalStage buttonName(Optional<String> buttonName) {
            this.buttonName = buttonName;
            return this;
        }

        @java.lang.Override
        public _FinalStage description(Nullable<String> description) {
            if (description.isNull()) {
                this.description = null;
            } else if (description.isEmpty()) {
                this.description = Optional.empty();
            } else {
                this.description = Optional.of(description.get());
            }
            return this;
        }

        @java.lang.Override
        public _FinalStage description(String description) {
            this.description = Optional.ofNullable(description);
            return this;
        }

        @java.lang.Override
        @JsonSetter(value = "description", nulls = Nulls.SKIP)
        public _FinalStage description(Optional<String> description) {
            this.description = description;
            return this;
        }

        @java.lang.Override
        public ActionCapability build() {
            return new ActionCapability(
                    name,
                    description,
                    createdAt,
                    enabled,
                    version,
                    capabilityId,
                    userInteractionRequired,
                    buttonName,
                    userFormParameters,
                    precondition,
                    descriptionOverride,
                    preconditionExplanation,
                    pinned,
                    additionalProperties);
        }
    }
}
