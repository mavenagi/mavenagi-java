/**
 * This file was auto-generated by Fern from our API Definition.
 */
package com.mavenagi.resources.knowledge;

import com.mavenagi.core.ClientOptions;
import com.mavenagi.core.RequestOptions;
import com.mavenagi.resources.knowledge.types.FinalizeKnowledgeBaseVersionRequest;
import com.mavenagi.resources.knowledge.types.KnowledgeBaseRequest;
import com.mavenagi.resources.knowledge.types.KnowledgeBaseResponse;
import com.mavenagi.resources.knowledge.types.KnowledgeBaseVersion;
import com.mavenagi.resources.knowledge.types.KnowledgeDocumentRequest;
import com.mavenagi.resources.knowledge.types.KnowledgeDocumentResponse;
import java.util.concurrent.CompletableFuture;

public class AsyncKnowledgeClient {
    protected final ClientOptions clientOptions;

    private final AsyncRawKnowledgeClient rawClient;

    public AsyncKnowledgeClient(ClientOptions clientOptions) {
        this.clientOptions = clientOptions;
        this.rawClient = new AsyncRawKnowledgeClient(clientOptions);
    }

    /**
     * Get responses with HTTP metadata like headers
     */
    public AsyncRawKnowledgeClient withRawResponse() {
        return this.rawClient;
    }

    /**
     * Update a knowledge base or create it if it doesn't exist.
     */
    public CompletableFuture<KnowledgeBaseResponse> createOrUpdateKnowledgeBase(KnowledgeBaseRequest request) {
        return this.rawClient.createOrUpdateKnowledgeBase(request).thenApply(response -> response.body());
    }

    /**
     * Update a knowledge base or create it if it doesn't exist.
     */
    public CompletableFuture<KnowledgeBaseResponse> createOrUpdateKnowledgeBase(
            KnowledgeBaseRequest request, RequestOptions requestOptions) {
        return this.rawClient
                .createOrUpdateKnowledgeBase(request, requestOptions)
                .thenApply(response -> response.body());
    }

    /**
     * Get an existing knowledge base by its supplied ID
     */
    public CompletableFuture<KnowledgeBaseResponse> getKnowledgeBase(String knowledgeBaseReferenceId) {
        return this.rawClient.getKnowledgeBase(knowledgeBaseReferenceId).thenApply(response -> response.body());
    }

    /**
     * Get an existing knowledge base by its supplied ID
     */
    public CompletableFuture<KnowledgeBaseResponse> getKnowledgeBase(
            String knowledgeBaseReferenceId, RequestOptions requestOptions) {
        return this.rawClient
                .getKnowledgeBase(knowledgeBaseReferenceId, requestOptions)
                .thenApply(response -> response.body());
    }

    /**
     * Create a new knowledge base version.
     * <p>If an existing version is in progress, then that version will be finalized in an error state.</p>
     */
    public CompletableFuture<KnowledgeBaseVersion> createKnowledgeBaseVersion(
            String knowledgeBaseReferenceId, KnowledgeBaseVersion request) {
        return this.rawClient
                .createKnowledgeBaseVersion(knowledgeBaseReferenceId, request)
                .thenApply(response -> response.body());
    }

    /**
     * Create a new knowledge base version.
     * <p>If an existing version is in progress, then that version will be finalized in an error state.</p>
     */
    public CompletableFuture<KnowledgeBaseVersion> createKnowledgeBaseVersion(
            String knowledgeBaseReferenceId, KnowledgeBaseVersion request, RequestOptions requestOptions) {
        return this.rawClient
                .createKnowledgeBaseVersion(knowledgeBaseReferenceId, request, requestOptions)
                .thenApply(response -> response.body());
    }

    /**
     * Finalize the latest knowledge base version. Required to indicate the version is complete. Will throw an exception if the latest version is not in progress.
     */
    public CompletableFuture<KnowledgeBaseVersion> finalizeKnowledgeBaseVersion(String knowledgeBaseReferenceId) {
        return this.rawClient
                .finalizeKnowledgeBaseVersion(knowledgeBaseReferenceId)
                .thenApply(response -> response.body());
    }

    /**
     * Finalize the latest knowledge base version. Required to indicate the version is complete. Will throw an exception if the latest version is not in progress.
     */
    public CompletableFuture<KnowledgeBaseVersion> finalizeKnowledgeBaseVersion(
            String knowledgeBaseReferenceId, FinalizeKnowledgeBaseVersionRequest request) {
        return this.rawClient
                .finalizeKnowledgeBaseVersion(knowledgeBaseReferenceId, request)
                .thenApply(response -> response.body());
    }

    /**
     * Finalize the latest knowledge base version. Required to indicate the version is complete. Will throw an exception if the latest version is not in progress.
     */
    public CompletableFuture<KnowledgeBaseVersion> finalizeKnowledgeBaseVersion(
            String knowledgeBaseReferenceId,
            FinalizeKnowledgeBaseVersionRequest request,
            RequestOptions requestOptions) {
        return this.rawClient
                .finalizeKnowledgeBaseVersion(knowledgeBaseReferenceId, request, requestOptions)
                .thenApply(response -> response.body());
    }

    /**
     * Create knowledge document. Requires an existing knowledge base with an in progress version. Will throw an exception if the latest version is not in progress.
     * <p>&lt;Tip&gt;
     * This API maintains document version history. If for the same reference ID neither the `title` nor `text` fields
     * have changed, a new document version will not be created. The existing version will be reused.
     * &lt;/Tip&gt;</p>
     */
    public CompletableFuture<KnowledgeDocumentResponse> createKnowledgeDocument(
            String knowledgeBaseReferenceId, KnowledgeDocumentRequest request) {
        return this.rawClient
                .createKnowledgeDocument(knowledgeBaseReferenceId, request)
                .thenApply(response -> response.body());
    }

    /**
     * Create knowledge document. Requires an existing knowledge base with an in progress version. Will throw an exception if the latest version is not in progress.
     * <p>&lt;Tip&gt;
     * This API maintains document version history. If for the same reference ID neither the `title` nor `text` fields
     * have changed, a new document version will not be created. The existing version will be reused.
     * &lt;/Tip&gt;</p>
     */
    public CompletableFuture<KnowledgeDocumentResponse> createKnowledgeDocument(
            String knowledgeBaseReferenceId, KnowledgeDocumentRequest request, RequestOptions requestOptions) {
        return this.rawClient
                .createKnowledgeDocument(knowledgeBaseReferenceId, request, requestOptions)
                .thenApply(response -> response.body());
    }

    /**
     * Not yet implemented. Update knowledge document. Requires an existing knowledge base with an in progress version of type PARTIAL. Will throw an exception if the latest version is not in progress.
     */
    public CompletableFuture<KnowledgeDocumentResponse> updateKnowledgeDocument(
            String knowledgeBaseReferenceId, KnowledgeDocumentRequest request) {
        return this.rawClient
                .updateKnowledgeDocument(knowledgeBaseReferenceId, request)
                .thenApply(response -> response.body());
    }

    /**
     * Not yet implemented. Update knowledge document. Requires an existing knowledge base with an in progress version of type PARTIAL. Will throw an exception if the latest version is not in progress.
     */
    public CompletableFuture<KnowledgeDocumentResponse> updateKnowledgeDocument(
            String knowledgeBaseReferenceId, KnowledgeDocumentRequest request, RequestOptions requestOptions) {
        return this.rawClient
                .updateKnowledgeDocument(knowledgeBaseReferenceId, request, requestOptions)
                .thenApply(response -> response.body());
    }

    /**
     * Not yet implemented. Delete knowledge document. Requires an existing knowledge base with an in progress version of type PARTIAL. Will throw an exception if the latest version is not in progress.
     */
    public CompletableFuture<Void> deleteKnowledgeDocument(
            String knowledgeBaseReferenceId, String knowledgeDocumentReferenceId) {
        return this.rawClient
                .deleteKnowledgeDocument(knowledgeBaseReferenceId, knowledgeDocumentReferenceId)
                .thenApply(response -> response.body());
    }

    /**
     * Not yet implemented. Delete knowledge document. Requires an existing knowledge base with an in progress version of type PARTIAL. Will throw an exception if the latest version is not in progress.
     */
    public CompletableFuture<Void> deleteKnowledgeDocument(
            String knowledgeBaseReferenceId, String knowledgeDocumentReferenceId, RequestOptions requestOptions) {
        return this.rawClient
                .deleteKnowledgeDocument(knowledgeBaseReferenceId, knowledgeDocumentReferenceId, requestOptions)
                .thenApply(response -> response.body());
    }
}
