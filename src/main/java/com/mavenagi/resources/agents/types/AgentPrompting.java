/**
 * This file was auto-generated by Fern from our API Definition.
 */
package com.mavenagi.resources.agents.types;

import com.fasterxml.jackson.annotation.JsonAnyGetter;
import com.fasterxml.jackson.annotation.JsonAnySetter;
import com.fasterxml.jackson.annotation.JsonIgnoreProperties;
import com.fasterxml.jackson.annotation.JsonInclude;
import com.fasterxml.jackson.annotation.JsonProperty;
import com.fasterxml.jackson.annotation.JsonSetter;
import com.fasterxml.jackson.annotation.Nulls;
import com.fasterxml.jackson.databind.annotation.JsonDeserialize;
import com.mavenagi.core.ObjectMappers;
import com.mavenagi.resources.commons.types.LlmPersona;
import java.util.HashMap;
import java.util.Map;
import java.util.Objects;
import java.util.Optional;
import org.jetbrains.annotations.NotNull;

@JsonInclude(JsonInclude.Include.NON_ABSENT)
@JsonDeserialize(builder = AgentPrompting.Builder.class)
public final class AgentPrompting {
    private final LlmPersona persona;

    private final Optional<String> additionalPromptText;

    private final Optional<String> categoryGenerationPromptText;

    private final Optional<String> contentSafetyViolationResponsePromptText;

    private final boolean rejectQuestionsWithoutKnowledge;

    private final Map<String, Object> additionalProperties;

    private AgentPrompting(
            LlmPersona persona,
            Optional<String> additionalPromptText,
            Optional<String> categoryGenerationPromptText,
            Optional<String> contentSafetyViolationResponsePromptText,
            boolean rejectQuestionsWithoutKnowledge,
            Map<String, Object> additionalProperties) {
        this.persona = persona;
        this.additionalPromptText = additionalPromptText;
        this.categoryGenerationPromptText = categoryGenerationPromptText;
        this.contentSafetyViolationResponsePromptText = contentSafetyViolationResponsePromptText;
        this.rejectQuestionsWithoutKnowledge = rejectQuestionsWithoutKnowledge;
        this.additionalProperties = additionalProperties;
    }

    /**
     * @return The overall persona of the agent.
     */
    @JsonProperty("persona")
    public LlmPersona getPersona() {
        return persona;
    }

    /**
     * @return Additional text directly appended to the prompt. This field is replaced by Knowledge Documents with <code>llmInclusionsStatus</code> set to <code>ALWAYS</code>.
     */
    @JsonProperty("additionalPromptText")
    public Optional<String> getAdditionalPromptText() {
        return additionalPromptText;
    }

    /**
     * @return LLM prompt for category generation.
     * <p>Use this to specify a fixed set of categories that an LLM should choose from when analyzing a conversation.
     * When not set uses a default prompt which gives the LLM flexibility to determine appropriate categories on its own.</p>
     */
    @JsonProperty("categoryGenerationPromptText")
    public Optional<String> getCategoryGenerationPromptText() {
        return categoryGenerationPromptText;
    }

    /**
     * @return LLM prompt for generating a response when the user's question has been detected as unsafe.
     * <p>Use this to provide custom LLM generated replies when dealing with content safety violations.
     * When not set, the system fallback message will be used and replies will not be personalized by the LLM as it will not be involved.</p>
     */
    @JsonProperty("contentSafetyViolationResponsePromptText")
    public Optional<String> getContentSafetyViolationResponsePromptText() {
        return contentSafetyViolationResponsePromptText;
    }

    /**
     * @return Return the system fallback message on all questions that have no relevant knowledge bases or actions.
     */
    @JsonProperty("rejectQuestionsWithoutKnowledge")
    public boolean getRejectQuestionsWithoutKnowledge() {
        return rejectQuestionsWithoutKnowledge;
    }

    @java.lang.Override
    public boolean equals(Object other) {
        if (this == other) return true;
        return other instanceof AgentPrompting && equalTo((AgentPrompting) other);
    }

    @JsonAnyGetter
    public Map<String, Object> getAdditionalProperties() {
        return this.additionalProperties;
    }

    private boolean equalTo(AgentPrompting other) {
        return persona.equals(other.persona)
                && additionalPromptText.equals(other.additionalPromptText)
                && categoryGenerationPromptText.equals(other.categoryGenerationPromptText)
                && contentSafetyViolationResponsePromptText.equals(other.contentSafetyViolationResponsePromptText)
                && rejectQuestionsWithoutKnowledge == other.rejectQuestionsWithoutKnowledge;
    }

    @java.lang.Override
    public int hashCode() {
        return Objects.hash(
                this.persona,
                this.additionalPromptText,
                this.categoryGenerationPromptText,
                this.contentSafetyViolationResponsePromptText,
                this.rejectQuestionsWithoutKnowledge);
    }

    @java.lang.Override
    public String toString() {
        return ObjectMappers.stringify(this);
    }

    public static PersonaStage builder() {
        return new Builder();
    }

    public interface PersonaStage {
        /**
         * <p>The overall persona of the agent.</p>
         */
        RejectQuestionsWithoutKnowledgeStage persona(@NotNull LlmPersona persona);

        Builder from(AgentPrompting other);
    }

    public interface RejectQuestionsWithoutKnowledgeStage {
        /**
         * <p>Return the system fallback message on all questions that have no relevant knowledge bases or actions.</p>
         */
        _FinalStage rejectQuestionsWithoutKnowledge(boolean rejectQuestionsWithoutKnowledge);
    }

    public interface _FinalStage {
        AgentPrompting build();

        /**
         * <p>Additional text directly appended to the prompt. This field is replaced by Knowledge Documents with <code>llmInclusionsStatus</code> set to <code>ALWAYS</code>.</p>
         */
        _FinalStage additionalPromptText(Optional<String> additionalPromptText);

        _FinalStage additionalPromptText(String additionalPromptText);

        /**
         * <p>LLM prompt for category generation.</p>
         * <p>Use this to specify a fixed set of categories that an LLM should choose from when analyzing a conversation.
         * When not set uses a default prompt which gives the LLM flexibility to determine appropriate categories on its own.</p>
         */
        _FinalStage categoryGenerationPromptText(Optional<String> categoryGenerationPromptText);

        _FinalStage categoryGenerationPromptText(String categoryGenerationPromptText);

        /**
         * <p>LLM prompt for generating a response when the user's question has been detected as unsafe.</p>
         * <p>Use this to provide custom LLM generated replies when dealing with content safety violations.
         * When not set, the system fallback message will be used and replies will not be personalized by the LLM as it will not be involved.</p>
         */
        _FinalStage contentSafetyViolationResponsePromptText(Optional<String> contentSafetyViolationResponsePromptText);

        _FinalStage contentSafetyViolationResponsePromptText(String contentSafetyViolationResponsePromptText);
    }

    @JsonIgnoreProperties(ignoreUnknown = true)
    public static final class Builder implements PersonaStage, RejectQuestionsWithoutKnowledgeStage, _FinalStage {
        private LlmPersona persona;

        private boolean rejectQuestionsWithoutKnowledge;

        private Optional<String> contentSafetyViolationResponsePromptText = Optional.empty();

        private Optional<String> categoryGenerationPromptText = Optional.empty();

        private Optional<String> additionalPromptText = Optional.empty();

        @JsonAnySetter
        private Map<String, Object> additionalProperties = new HashMap<>();

        private Builder() {}

        @java.lang.Override
        public Builder from(AgentPrompting other) {
            persona(other.getPersona());
            additionalPromptText(other.getAdditionalPromptText());
            categoryGenerationPromptText(other.getCategoryGenerationPromptText());
            contentSafetyViolationResponsePromptText(other.getContentSafetyViolationResponsePromptText());
            rejectQuestionsWithoutKnowledge(other.getRejectQuestionsWithoutKnowledge());
            return this;
        }

        /**
         * <p>The overall persona of the agent.</p>
         * <p>The overall persona of the agent.</p>
         * @return Reference to {@code this} so that method calls can be chained together.
         */
        @java.lang.Override
        @JsonSetter("persona")
        public RejectQuestionsWithoutKnowledgeStage persona(@NotNull LlmPersona persona) {
            this.persona = Objects.requireNonNull(persona, "persona must not be null");
            return this;
        }

        /**
         * <p>Return the system fallback message on all questions that have no relevant knowledge bases or actions.</p>
         * <p>Return the system fallback message on all questions that have no relevant knowledge bases or actions.</p>
         * @return Reference to {@code this} so that method calls can be chained together.
         */
        @java.lang.Override
        @JsonSetter("rejectQuestionsWithoutKnowledge")
        public _FinalStage rejectQuestionsWithoutKnowledge(boolean rejectQuestionsWithoutKnowledge) {
            this.rejectQuestionsWithoutKnowledge = rejectQuestionsWithoutKnowledge;
            return this;
        }

        /**
         * <p>LLM prompt for generating a response when the user's question has been detected as unsafe.</p>
         * <p>Use this to provide custom LLM generated replies when dealing with content safety violations.
         * When not set, the system fallback message will be used and replies will not be personalized by the LLM as it will not be involved.</p>
         * @return Reference to {@code this} so that method calls can be chained together.
         */
        @java.lang.Override
        public _FinalStage contentSafetyViolationResponsePromptText(String contentSafetyViolationResponsePromptText) {
            this.contentSafetyViolationResponsePromptText =
                    Optional.ofNullable(contentSafetyViolationResponsePromptText);
            return this;
        }

        /**
         * <p>LLM prompt for generating a response when the user's question has been detected as unsafe.</p>
         * <p>Use this to provide custom LLM generated replies when dealing with content safety violations.
         * When not set, the system fallback message will be used and replies will not be personalized by the LLM as it will not be involved.</p>
         */
        @java.lang.Override
        @JsonSetter(value = "contentSafetyViolationResponsePromptText", nulls = Nulls.SKIP)
        public _FinalStage contentSafetyViolationResponsePromptText(
                Optional<String> contentSafetyViolationResponsePromptText) {
            this.contentSafetyViolationResponsePromptText = contentSafetyViolationResponsePromptText;
            return this;
        }

        /**
         * <p>LLM prompt for category generation.</p>
         * <p>Use this to specify a fixed set of categories that an LLM should choose from when analyzing a conversation.
         * When not set uses a default prompt which gives the LLM flexibility to determine appropriate categories on its own.</p>
         * @return Reference to {@code this} so that method calls can be chained together.
         */
        @java.lang.Override
        public _FinalStage categoryGenerationPromptText(String categoryGenerationPromptText) {
            this.categoryGenerationPromptText = Optional.ofNullable(categoryGenerationPromptText);
            return this;
        }

        /**
         * <p>LLM prompt for category generation.</p>
         * <p>Use this to specify a fixed set of categories that an LLM should choose from when analyzing a conversation.
         * When not set uses a default prompt which gives the LLM flexibility to determine appropriate categories on its own.</p>
         */
        @java.lang.Override
        @JsonSetter(value = "categoryGenerationPromptText", nulls = Nulls.SKIP)
        public _FinalStage categoryGenerationPromptText(Optional<String> categoryGenerationPromptText) {
            this.categoryGenerationPromptText = categoryGenerationPromptText;
            return this;
        }

        /**
         * <p>Additional text directly appended to the prompt. This field is replaced by Knowledge Documents with <code>llmInclusionsStatus</code> set to <code>ALWAYS</code>.</p>
         * @return Reference to {@code this} so that method calls can be chained together.
         */
        @java.lang.Override
        public _FinalStage additionalPromptText(String additionalPromptText) {
            this.additionalPromptText = Optional.ofNullable(additionalPromptText);
            return this;
        }

        /**
         * <p>Additional text directly appended to the prompt. This field is replaced by Knowledge Documents with <code>llmInclusionsStatus</code> set to <code>ALWAYS</code>.</p>
         */
        @java.lang.Override
        @JsonSetter(value = "additionalPromptText", nulls = Nulls.SKIP)
        public _FinalStage additionalPromptText(Optional<String> additionalPromptText) {
            this.additionalPromptText = additionalPromptText;
            return this;
        }

        @java.lang.Override
        public AgentPrompting build() {
            return new AgentPrompting(
                    persona,
                    additionalPromptText,
                    categoryGenerationPromptText,
                    contentSafetyViolationResponsePromptText,
                    rejectQuestionsWithoutKnowledge,
                    additionalProperties);
        }
    }
}
